{% extends 'base.html' %}

{% block content %}
<section class="dashboard">
  <h2>Welcome to TrailLend</h2>
  <p>
    This is your dashboard.  
    Use the sidebar menu to navigate through different sections like Inventory, Reports, Users, and more.
  </p>

  <!-- Summary Cards -->
  <div class="cards">
    <div class="card">
      <h3>Total Users</h3>
      <p id="totalUsers">15</p>
    </div>
    <div class="card">
      <h3>Total Items</h3>
      <p id="totalItems">120</p>
    </div>
    <div class="card">
      <h3>Total Categories</h3>
      <p id="totalCategories">4</p>
    </div>
    <div class="card">
      <h3>Total Borrowed</h3>
      <p id="totalBorrowed">35</p>
    </div>
  </div>

  <!-- Charts Grid -->
  <div class="charts">
    <div id="pieChart"></div>
    <div id="barChart"></div>
    <div id="gaugeChart"></div>
  </div>
</section>

<!-- ApexCharts Library -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
  // Pie Chart (Category Distribution)
  var pieOptions = {
    chart: { type: 'pie', height: 300 },
    series: [40, 25, 20, 15],
    labels: ['Sports Equipment', 'Chairs', 'Sound System', 'Others'],
    colors: ['#E5A000', '#4CAF50', '#2196F3', '#FF5722']
  };
  new ApexCharts(document.querySelector("#pieChart"), pieOptions).render();

  // Bar Chart (Most Borrowed Items)
  var barOptions = {
    chart: { type: 'bar', height: 300 },
    series: [{
      name: 'Times Borrowed',
      data: [30, 25, 18, 12, 10]
    }],
    xaxis: {
      categories: ['Basketball', 'Projector', 'Chairs', 'Speakers', 'Tables']
    },
    colors: ['#2196F3']
  };
  new ApexCharts(document.querySelector("#barChart"), barOptions).render();

  // Gauge / Radial Progress (Availability vs Borrowed)
  var gaugeOptions = {
    chart: { type: 'radialBar', height: 300 },
    series: [71], // Available % = (120-35)/120 â‰ˆ 71%
    labels: ['Available Items'],
    colors: ['#4CAF50'],
    plotOptions: {
      radialBar: {
        hollow: { size: '60%' },
        dataLabels: {
          value: { fontSize: '22px' },
          total: {
            show: true,
            label: 'Borrowed',
            formatter: () => '35'
          }
        }
      }
    }
  };
  new ApexCharts(document.querySelector("#gaugeChart"), gaugeOptions).render();
</script>

<style>
  .dashboard {
    padding: 20px;
    height: 100%;
    overflow: auto;
  }

  .cards {
    display: flex;
    gap: 20px;
    margin-top: 20px;
  }

  .card {
    flex: 1;
    background: #f8f9fb;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }

  .card h3 {
    margin-bottom: 10px;
    font-size: 1.1rem;
    color: #444;
  }

  .card p {
    font-size: 1.5rem;
    font-weight: bold;
    color: #E5A000; /* highlight color */
  }

  .charts {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }

  .charts > div {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
</style>
{% endblock %}
